<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Admin - Script Manager</title><style>
*{box-sizing:border-box;margin:0}body{background:#0b0b0b;color:#eaeaea;font-family:'Courier New',monospace;padding:20px}.container{max-width:800px;margin:0 auto}h1{color:#00f2ea;border-left:4px solid #00f2ea;padding-left:15px;margin-bottom:30px}.logout-bar{display:flex;justify-content:space-between;align-items:center;background:#1a1a1a;padding:10px 20px;border-radius:50px;margin-bottom:20px}.logout-btn{background:#ff4444;color:white;border:none;padding:8px 20px;border-radius:50px;cursor:pointer}.admin-card{background:#111;border:1px solid #2a2a2a;border-radius:16px;padding:25px;margin-bottom:25px}h2{color:#00f2ea;margin-bottom:20px}input,textarea{width:100%;padding:12px;margin:10px 0;background:#1a1a1a;border:1px solid #3a3a3a;color:#fff;border-radius:8px}.checkbox-group{display:flex;align-items:center;gap:10px;margin:15px 0}.feature-tags{display:flex;flex-wrap:wrap;gap:10px;margin:15px 0}.feature-tag{background:#1a2a2a;color:#9cfff8;padding:8px 16px;border-radius:30px;cursor:pointer}.feature-tag.selected{background:#00f2ea;color:#000}.key-system-selector{background:#1a2a2a;border-radius:8px;padding:15px;margin:15px 0}.key-option{display:flex;align-items:center;gap:10px;margin:10px 0;padding:10px;background:#0f1a1f;border-radius:8px;cursor:pointer}.key-option.selected{background:#00f2ea20;border:1px solid #00f2ea}.key-badge{padding:4px 12px;border-radius:30px;font-size:.8rem}.key-badge.keyless{background:#4a4a4a;color:#fff}.key-badge.key1{background:#00aa00;color:#fff}.key-badge.key2{background:#ffaa00;color:#000}.key-badge.key3{background:#ff4444;color:#fff}.script-item{background:#1a1a1a;border-left:3px solid #00f2ea;padding:15px;margin:15px 0;border-radius:8px;display:flex;justify-content:space-between}button{background:#00f2ea;color:#000;border:0;padding:14px;border-radius:50px;cursor:pointer;width:100%}button.delete{background:#ff4444;color:#fff}button.edit{background:#ffaa00;color:#000}.status-badge{padding:4px 12px;border-radius:30px;background:#00f2ea20;color:#00f2ea;display:inline-block}
</style></head><body>
<div class="container">
  <div class="logout-bar">
    <span>üîí Admin Panel</span>
    <button class="logout-btn" onclick="logout()">üö™ Logout</button>
  </div>
  
  <div id="statusMessage" style="margin-bottom:20px;"></div>
  
  <!-- Admin content here - same as before -->
  <div class="admin-card">
    <h2 id="formTitle">üìù Add New Script</h2>
    <input type="hidden" id="editingScriptId">
    <label>Script Name</label>
    <input type="text" id="scriptName" placeholder="e.g., üî™ NEW GAME">
    <label>Loadstring Code</label>
    <textarea id="scriptCode" placeholder='loadstring(game:HttpGet("URL"))()'></textarea>
    <!-- Rest of your admin form... -->
  </div>
</div>

<script>
// ==================== AUTH CHECK ====================
async function checkAuth() {
  try {
    const response = await fetch('/api/verify');
    const data = await response.json();
    if (!data.authenticated) {
      window.location.href = '/login.html';
    }
  } catch {
    window.location.href = '/login.html';
  }
}

// ==================== LOGOUT ====================
async function logout() {
  await fetch('/api/logout', { method: 'POST' });
  window.location.href = '/login.html';
}

// ==================== RUN AUTH CHECK ====================
checkAuth();

// ==================== REST OF YOUR ADMIN CODE ====================
// (Copy all your existing admin JavaScript here)
let selectedFeatures = [], currentScripts = [], selectedKeySystem = 'keyless';

function showStatus(msg, isError) {
  let el = document.getElementById('statusMessage');
  el.innerHTML = `<div style="background:${isError?'#ff444420':'#00f2ea20'};border:1px solid ${isError?'#ff4444':'#00f2ea'};color:${isError?'#ff8888':'#00f2ea'};padding:10px;border-radius:8px;">${msg}</div>`;
  setTimeout(() => el.innerHTML = '', 5000);
}

// ... rest of your existing admin functions (loadScripts, saveScript, etc.)
</script></body></html>
