<!DOCTYPE html>
<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>lokus hub scripts</title><style>
*{box-sizing:border-box;margin:0}body{background:#0b0b0b;color:#eaeaea;font-family:'Courier New',monospace;padding:20px;transition:all .3s ease}.container{max-width:1200px;margin:0 auto}h1{font-size:2rem;color:#00f2ea;border-left:4px solid #00f2ea;padding-left:20px;margin-bottom:30px}.subhead{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:15px;border-bottom:1px solid #2a2a2a}.stats{display:flex;gap:15px}.stat-badge{background:#1a1a2e;border:1px solid #00f2ea40;border-radius:40px;padding:10px 20px;font-size:.9rem;color:#00f2ea}.music-btn{background:#1a1a1a;border:1px solid #2e2e2e;border-radius:40px;padding:10px 20px;cursor:pointer;color:#00f2ea}.music-btn.playing{animation:pulse 2s infinite}.discord-card{background:linear-gradient(145deg,#1a1f2e,#0f1219);border:2px solid #5865F2;border-radius:24px;padding:25px;margin:30px 0;display:flex;justify-content:space-between;align-items:center;cursor:pointer}.discord-left{display:flex;align-items:center;gap:20px}.discord-icon{font-size:3rem;background:#5865F2;width:70px;height:70px;border-radius:35px;display:flex;align-items:center;justify-content:center;color:white}.discord-right{display:flex;gap:30px}.stat-box{text-align:center}.stat-number{font-size:2rem;font-weight:bold;color:#00f2ea}.stat-label{font-size:.8rem;color:#8895c7}.scripts-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin:30px 0}@media (max-width:900px){.scripts-grid{grid-template-columns:repeat(2,1fr)}}@media (max-width:600px){.scripts-grid{grid-template-columns:1fr}}.script-card{background:#111;border:1px solid #242424;border-radius:16px;padding:20px;transition:all .2s;display:flex;flex-direction:column;position:relative}.script-card:hover{transform:translateY(-5px);box-shadow:0 10px 20px rgba(0,242,234,0.1)}.script-header{display:flex;align-items:center;gap:12px;margin-bottom:15px}.script-icon{width:50px;height:50px;border-radius:12px;object-fit:cover;border:2px solid #00f2ea40}.script-title{font-size:1.1rem;color:#00f2ea;font-weight:bold;flex:1}.script-description{color:#aaa;font-size:.8rem;margin-bottom:15px;line-height:1.5}.feature-tags{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:15px}.feature-tag{background:#1a2a2a;color:#9cfff8;padding:4px 12px;border-radius:30px;font-size:.7rem;border:1px solid #00f2ea40}.key-badge{display:inline-block;padding:4px 12px;border-radius:30px;font-size:.7rem;font-weight:bold;margin-bottom:10px}.key-badge.keyless{background:#4a4a4a;color:#fff}.key-badge.key1{background:#00aa00;color:#fff}.key-badge.key2{background:#ffaa00;color:#000}.key-badge.key3{background:#ff4444;color:#fff}.script-code{background:#0c0c0c;padding:15px;border-radius:12px;font-size:.75rem;color:#c5fffb;border:1px solid #2e2e2e;margin:15px 0;overflow-x:auto;white-space:pre-wrap;word-break:break-all;transition:filter .2s}.copy-btn{background:#00f2ea;border:none;color:#000;padding:12px;border-radius:50px;font-weight:bold;cursor:pointer;width:100%;margin-top:auto;transition:all .2s;z-index:5}.copy-btn:hover{background:#00d4cc}.copy-btn:disabled{opacity:0.5;cursor:not-allowed}.version-badge{background:#ffaa00;color:#000;padding:2px 8px;border-radius:30px;font-size:.6rem;margin-left:8px;font-weight:bold}.faq-section{background:#111;border-radius:20px;padding:25px;margin:40px 0}.faq-item{margin-bottom:20px}.faq-question{font-weight:bold;color:#fff;margin-bottom:8px;display:flex;align-items:center;gap:8px}.faq-question:before{content:"‚ùì";color:#00f2ea}.faq-answer{color:#aaa;padding-left:28px}.social-grid{display:flex;flex-direction:column;gap:12px;margin:20px 0}.social-link{background:#111;padding:15px;border-radius:50px;text-align:center;color:#eaeaea;text-decoration:none;border:1px solid #2c2c2c}.social-link:hover{background:#1f1f1f;border-color:#00f2ea}.note{margin-top:40px;font-size:.7rem;color:#5f5f5f;text-align:center}.blurred{position:relative}.blurred .script-header,.blurred .key-badge,.blurred .feature-tags,.blurred .script-description,.blurred .script-code,.blurred .copy-btn{filter:blur(5px);pointer-events:none;user-select:none;opacity:0.7}.blurred::after{content:"üîí VERIFY TO UNLOCK";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#00f2ea;color:#000;padding:16px 28px;border-radius:50px;font-weight:bold;font-size:1.1rem;z-index:20;border:2px solid #4afff0;box-shadow:0 0 20px #00f2ea;animation:glow 1.5s infinite;cursor:pointer;pointer-events:auto;white-space:nowrap;text-align:center}@keyframes glow{0%{box-shadow:0 0 10px #00f2ea}50%{box-shadow:0 0 25px #00f2ea}100%{box-shadow:0 0 10px #00f2ea}}.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.95);backdrop-filter:blur(10px);display:none;justify-content:center;align-items:center;z-index:1000;padding:16px}.modal-overlay.active{display:flex}.modal-content{background:#111;border:2px solid #00f2ea;border-radius:32px;padding:32px 24px;max-width:400px;width:100%;text-align:center;box-shadow:0 0 40px #00f2ea33;animation:modalPop .3s ease}@keyframes modalPop{0%{transform:scale(.9);opacity:0}100%{transform:scale(1);opacity:1}}.modal-icon{font-size:56px;margin-bottom:16px}.modal-title{font-size:24px;font-weight:700;color:#00f2ea;margin-bottom:16px}.modal-text{color:#ccc;margin-bottom:24px;line-height:1.5}.redirect-timer{font-size:24px;color:#00f2ea;margin:20px 0;font-weight:bold}.timer-bar{width:100%;height:8px;background:#333;border-radius:10px;overflow:hidden;margin:16px 0}.timer-progress{height:100%;background:#00f2ea;width:100%;transition:width 1s linear}.modal-close{margin-top:20px;color:#888;cursor:pointer;font-size:14px}.modal-close:hover{color:#00f2ea}.toast{position:fixed;bottom:30px;left:50%;transform:translateX(-50%);background:#00f2ea;color:#000;padding:12px 30px;border-radius:50px;font-weight:bold;z-index:9999;display:none;box-shadow:0 5px 20px #00f2ea66}.toast.show{display:block;animation:slideUp .3s,fadeOut .3s 2s forwards}@keyframes slideUp{from{bottom:-50px}to{bottom:30px}}@keyframes fadeOut{to{opacity:0}}
</style></head><body>
<div class="container">
  <h1 id="typingTitle">lokus hub scripts</h1>
  
  <!-- VERSION DISPLAY -->
  <div id="versionDisplay" style="text-align:right; margin-bottom:10px; color:#ffaa00;"></div>
  
  <div class="subhead">
    <div class="stats">
      <span class="stat-badge">üëÅÔ∏è <span id="visitorCount">0</span> today</span>
      <span class="stat-badge">üìä <span id="totalVisits">0</span> total</span>
    </div>
    <span class="music-btn" id="musicIndicator" onclick="toggleMusic()">üîä music</span>
  </div>

  <audio id="bg-music" loop><source src="https://files.catbox.moe/71lr1s.mp3"></audio>

  <!-- DISCORD CARD -->
  <div class="discord-card" onclick="window.open('https://dsc.gg/lokus-hub', '_blank')">
    <div class="discord-left">
      <div class="discord-icon">üí¨</div>
      <div>
        <h3 style="color:white;">Join Discord</h3>
        <p style="color:#aab8e0;" id="discordServerName">lokus hub community</p>
      </div>
    </div>
    <div class="discord-right">
      <div class="stat-box">
        <div class="stat-number" id="onlineCount">--</div>
        <div class="stat-label">ONLINE</div>
      </div>
    </div>
  </div>

  <!-- SCRIPTS GRID -->
  <div class="scripts-grid" id="scriptsContainer">
    <p style="color:#666; text-align:center; grid-column:1/-1;">Loading scripts...</p>
  </div>

  <!-- FAQ SECTION -->
  <div class="faq-section">
    <h3 style="color:#00f2ea; margin-bottom:20px;">‚ùì Frequently Asked Questions</h3>
    <div class="faq-item">
      <div class="faq-question">How do I use these scripts?</div>
      <div class="faq-answer">Copy and paste into your Roblox executor</div>
    </div>
    <div class="faq-item">
      <div class="faq-question">Are these scripts safe?</div>
      <div class="faq-answer">Yes, all scripts are tested</div>
    </div>
  </div>

  <!-- SOCIALS -->
  <div class="social-grid">
    <a href="https://dsc.gg/lokus-hub" class="social-link">üí¨ discord</a>
    <a href="https://www.tiktok.com/@growagardenxaweso" class="social-link">üéµ tiktok</a>
    <a href="https://www.youtube.com/@drippyguygaming" class="social-link">‚ñ∂Ô∏è youtube</a>
  </div>

  <div class="note">‚ú¶ lokus hub scripts ‚Äî updated daily ‚ú¶</div>
</div>

<!-- REDIRECT MODAL -->
<div class="modal-overlay" id="redirectModal" onclick="closeRedirectModalIfOverlay(event)">
  <div class="modal-content">
    <div class="modal-icon">‚è≥</div>
    <div class="modal-title">Verification Required</div>
    <div class="modal-text" id="redirectModalText">Please wait 5 seconds to continue...</div>
    <div class="redirect-timer" id="redirectTimer">5</div>
    <div class="timer-bar">
      <div class="timer-progress" id="redirectProgress" style="width:100%"></div>
    </div>
    <div class="modal-close" onclick="closeRedirectModal()">‚úï Cancel</div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="copyToast">üìã Script copied!</div>

<script>
// ==================== VISITOR COUNTER ====================
let totalVisits = localStorage.getItem('totalVisits') || 0;
totalVisits = parseInt(totalVisits) + 1;
localStorage.setItem('totalVisits', totalVisits);

let today = new Date().toDateString();
let lastVisit = localStorage.getItem('lastVisit');
let dailyVisits = localStorage.getItem('dailyVisits') || 0;

if (lastVisit !== today) {
  dailyVisits = 1;
  localStorage.setItem('lastVisit', today);
} else {
  dailyVisits = parseInt(dailyVisits) + 1;
}
localStorage.setItem('dailyVisits', dailyVisits);

document.getElementById('visitorCount').textContent = dailyVisits;
document.getElementById('totalVisits').textContent = totalVisits;

// ==================== TOAST ====================
function showToast(msg) {
  let t = document.getElementById('copyToast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2500);
}

// ==================== MUSIC ====================
const audio = document.getElementById('bg-music');
const musicIndicator = document.getElementById('musicIndicator');
let musicStarted = false;
audio.volume = 0.15;

function toggleMusic() {
  if (audio.paused) {
    audio.play().then(() => {
      musicStarted = true;
      musicIndicator.innerHTML = 'üîä playing';
      musicIndicator.classList.add('playing');
    }).catch(() => {
      musicIndicator.innerHTML = '‚ö†Ô∏è tap again';
    });
  } else {
    audio.pause();
    musicIndicator.innerHTML = 'üîä music';
    musicIndicator.classList.remove('playing');
  }
}

// ==================== DISCORD WIDGET ====================
const GUILD_ID = '1441040764506345574';
async function fetchDiscordWidget() {
  try {
    const response = await fetch(`https://discord.com/api/guilds/${GUILD_ID}/widget.json`);
    if (!response.ok) throw new Error('Widget not enabled');
    const data = await response.json();
    document.getElementById('onlineCount').textContent = data.presence_count || 0;
    document.getElementById('discordServerName').textContent = data.name || 'Lokus Hub';
  } catch (error) {
    document.getElementById('onlineCount').textContent = '0';
  }
}

// ==================== REDIRECT MODAL FUNCTIONS ====================
let redirectTimer = null;
const redirectModal = document.getElementById('redirectModal');
const redirectTimerEl = document.getElementById('redirectTimer');
const redirectProgress = document.getElementById('redirectProgress');
let pendingRedirectUrl = null;

function showRedirectModal(url) {
  pendingRedirectUrl = url;
  redirectModal.classList.add('active');
  
  let timeLeft = 5;
  redirectTimerEl.textContent = timeLeft;
  redirectProgress.style.width = '100%';
  
  if (redirectTimer) clearInterval(redirectTimer);
  redirectTimer = setInterval(() => {
    timeLeft--;
    redirectTimerEl.textContent = timeLeft;
    redirectProgress.style.width = (timeLeft / 5) * 100 + '%';
    
    if (timeLeft <= 0) {
      clearInterval(redirectTimer);
      redirectModal.classList.remove('active');
      if (pendingRedirectUrl) {
        console.log('‚úÖ Redirecting to:', pendingRedirectUrl);
        window.location.href = pendingRedirectUrl;
      }
    }
  }, 1000);
}

function closeRedirectModal() {
  redirectModal.classList.remove('active');
  if (redirectTimer) {
    clearInterval(redirectTimer);
    redirectTimer = null;
  }
  pendingRedirectUrl = null;
}

function closeRedirectModalIfOverlay(e) {
  if (e.target === redirectModal) {
    closeRedirectModal();
  }
}

// ==================== LOAD THEME & SCRIPTS ====================
async function loadScripts() {
  try {
    const response = await fetch('scripts.json?t=' + Date.now());
    const data = await response.json();
    
    // Apply theme
    if (data.theme) {
      document.body.className = data.theme;
    }
    
    // Show latest version
    if (data.versions && data.versions.length > 0) {
      const latest = data.versions[0];
      document.getElementById('versionDisplay').innerHTML = 
        `<span class="version-badge">v${latest.version}</span> <span style="color:#888;">${latest.date}</span>`;
    }
    
    const container = document.getElementById('scriptsContainer');
    container.innerHTML = '';
    
    data.scripts.forEach(script => {
      const card = document.createElement('div');
      card.className = `script-card ${script.blurred ? 'blurred' : ''}`;
      card.id = script.id + '-card';
      
      // Handle click on ALL blurred scripts
      if (script.blurred) {
        card.addEventListener('click', function(e) {
          // Don't trigger if clicking the copy button
          if (e.target.classList.contains('copy-btn')) return;
          
          console.log('üîπ Clicked script:', script.name);
          console.log('üîπ Script ID:', script.id);
          console.log('üîπ Redirect URL:', script.redirectUrl);
          
          // Check if redirectUrl exists
          if (!script.redirectUrl) {
            alert('This script requires verification but no redirect URL is configured in admin panel.');
            return;
          }
          
          // Store BOTH the redirect URL AND script ID
          sessionStorage.setItem('bloxlinkRedirect', script.redirectUrl);
          sessionStorage.setItem('bloxlinkScriptId', script.id);
          sessionStorage.setItem('bloxlinkScriptName', script.name);
          console.log('‚úÖ Stored in sessionStorage - URL:', script.redirectUrl, 'ID:', script.id);
          
          // ALL blurred scripts go to bloxlink.html
          showRedirectModal('/bloxlink.html');
        });
      }
      
      let keyBadge = '';
      if (script.keySystem === 'keyless') keyBadge = '<span class="key-badge keyless">üîì KEYLESS</span>';
      else if (script.keySystem === 'key1') keyBadge = '<span class="key-badge key1">üîë 1 KEY</span>';
      else if (script.keySystem === 'key2') keyBadge = '<span class="key-badge key2">üîëüîë 2 KEYS</span>';
      else if (script.keySystem === 'key3') keyBadge = '<span class="key-badge key3">üîëüîëüîë 3 KEYS</span>';
      
      let features = '';
      if (script.features?.length) {
        features = '<div class="feature-tags">' + 
          script.features.map(f => `<span class="feature-tag">${f}</span>`).join('') + 
          '</div>';
      }
      
      let icon = script.image ? 
        `<img src="${script.image}" class="script-icon" onerror="this.style.display='none'">` : 
        '<div class="script-icon" style="background:#1a2a2a; display:flex; align-items:center; justify-content:center;">üìú</div>';
      
      card.innerHTML = `
        <div class="script-header">
          ${icon}
          <div class="script-title">${script.name}</div>
        </div>
        ${keyBadge}
        ${script.description ? `<div class="script-description">${script.description}</div>` : ''}
        ${features}
        <div class="script-code" id="${script.id}">${script.code.replace(/</g,'&lt;').replace(/>/g,'&gt;')}</div>
        <button class="copy-btn" onclick="copyScript('${script.id}')" ${script.blurred ? 'disabled' : ''}>üìã Copy Script</button>
      `;
      
      container.appendChild(card);
    });
  } catch (e) {
    console.error('Failed to load scripts:', e);
    document.getElementById('scriptsContainer').innerHTML = '<p style="color:#ff4444; text-align:center;">Failed to load scripts</p>';
  }
}

// ==================== COPY ====================
function copyScript(id) {
  const el = document.getElementById(id);
  if (!el) return;
  
  navigator.clipboard.writeText(el.textContent).then(() => {
    showToast('‚úÖ Script copied!');
  }).catch(() => {
    alert('Copy manually: ' + el.textContent);
  });
}

// ==================== INIT ====================
window.addEventListener('load', () => {
  loadScripts();
  fetchDiscordWidget();
  setInterval(fetchDiscordWidget, 60000);
  
  // Clear any old session data
  sessionStorage.removeItem('bloxlinkRedirect');
  sessionStorage.removeItem('bloxlinkScriptId');
  sessionStorage.removeItem('bloxlinkScriptName');
});

// Reload scripts every 5 minutes to get updates
setInterval(() => {
  console.log('üîÑ Checking for script updates...');
  loadScripts();
}, 300000); // 5 minutes
</script></body></html>
